# get the git branch and output it
parse_git_branch() {
   git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/(\1)/'
}

# Enable/disable xdebug
function xdebug() {
  sudo -v

  phpVersion="$1"
  if [ "$phpVersion" = "" ]; then
    phpVersion="7.4"
  fi

  iniFileLocation="/etc/php/$phpVersion/mods-available/xdebug.ini";
   
  currentLine=`cat $iniFileLocation | grep xdebug.so`

  if [[ $currentLine =~ ^#zend_extension ]];
  then
    sed -i -e 's/^#zend_extension/zend_extension/g' $iniFileLocation
    echo "xdebug is now active";
  else
    sed -i -e 's/^zend_extension/#zend_extension/g' $iniFileLocation
    echo "xdebug is now inactive";
  fi
}

# Git
function commit() {
  commitMessage="$1"

  if [ "$commitMessage" = "" ]; then
    commitMessage="wip"
  fi

  git add .
  eval "git commit -a -m '${commitMessage}'"
}

function checkout() {
  branch="$1"
  eval "git checkout ${branch}"
}
function merge() {
  branch="$1"
  eval "git merge ${branch}"
}

# Services control
function start() {
  for service in "$@"
  do
  eval "sudo service ${service} start"
  done
}

function stop() {
  for service in "$@"
  do
  eval "sudo service ${service} stop"
  done
}

function reload() {
  for service in "$@"
  do
  eval "sudo service ${service} reload"
  done
}

